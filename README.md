# Card Limit Manager ‚Äì AI Workshop

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –≤ —Ä–∞–º–∫–∞—Ö –≤–æ—Ä–∫—à–æ–ø–∞ –ø–æ **–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–º—É –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI –≤ IDE Cursor/Windsurf**.

## üìå –¶–µ–ª—å

–°–æ–∑–¥–∞—Ç—å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É **Card Limit Manager** ‚Äî —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ–¥–∞—á–∏ –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –∑–∞—è–≤–æ–∫ –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∫–∞—Ä—Ç.  
–í –ø—Ä–æ—Ü–µ—Å—Å–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö: –æ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–æ –∫–æ–¥–∞, —Ç–µ—Å—Ç–æ–≤ –∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è.

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **Frontend**: React 18 + TypeScript + Vite
- **Backend**: Go 1.22 + Gin (CLM —Å–µ—Ä–≤–∏—Å)
- **Database**: PostgreSQL 16 —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
- **Proxy**: Nginx –¥–ª—è —Ä–æ—É—Ç–∏–Ω–≥–∞ frontend/backend
- **DevTools**: Docker Compose, sql-migrate

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
git clone https://github.com/dpetrakov/card-limit-manager-workshop.git
cd card-limit-manager-workshop
docker compose up
```

–ü–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞:

- **–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: [http://localhost](http://localhost) ‚Äî React —Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–æ–∫
- **Health check**: [http://localhost/healthz](http://localhost/healthz) ‚Äî —Å—Ç–∞—Ç—É—Å nginx
- **Backend API**: [http://localhost/api/v1/](http://localhost/api/v1/) ‚Äî CLM —Å–µ—Ä–≤–∏—Å
- **Postgres**: localhost:5432 (user: `postgres`, pass: `postgres`)

---

## üë• –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ workflow:

| –†–æ–ª—å             | –ò–º—è               | Email                | ID                                     |
| ---------------- | ----------------- | -------------------- | -------------------------------------- |
| **EMPLOYEE**     | Test User         | test@example.com     | `a005d32d-6190-477c-b23e-38c44eaaaae0` |
| **TEAM_LEAD**    | Team Lead User    | teamlead@example.com | `b123e567-e89b-12d3-a456-426614174000` |
| **RISK_OFFICER** | Risk Officer User | risk@example.com     | `c789f012-e89b-12d3-a456-426614174001` |
| **CFO**          | CFO User          | cfo@example.com      | `d456c789-e89b-12d3-a456-426614174002` |

–ó–∞—è–≤–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –æ—Ç –∏–º–µ–Ω–∏ `Test User` (EMPLOYEE).

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### Frontend (React + TypeScript)

- ‚úÖ –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π (—Å—É–º–º–∞, –≤–∞–ª—é—Ç–∞, –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ, –¥–∞—Ç–∞)
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ backend API
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (—É—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞)

### Backend (Go + Gin)

- ‚úÖ REST API —ç–Ω–¥–ø–æ–∏–Ω—Ç `POST /api/v1/requests`
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ PostgreSQL
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### Database (PostgreSQL)

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã: users, limit_requests, approval_steps, audit_log
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)

---

## üîó API Endpoints

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏

```http
POST /api/v1/requests
Content-Type: application/json

{
  "amount": 1000.00,
  "currency": "USD",
  "justification": "Business trip to conference",
  "desired_date": "2024-12-31"
}
```

**Response 201:**

```json
{
  "id": "fa401de5-aaa1-49ec-bcb1-78e5a7fc243f",
  "user_id": "a005d32d-6190-477c-b23e-38c44eaaaae0",
  "amount": 1000,
  "currency": "USD",
  "justification": "Business trip to conference",
  "desired_date": "2024-12-31",
  "status": "PENDING_TEAM_LEAD",
  "created_at": "2025-05-23T07:24:23.337009Z",
  "updated_at": "2025-05-23T07:24:23.337009Z"
}
```

---

## üóÑÔ∏è –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞—è–≤–æ–∫

```bash
docker exec clm_postgres psql -U postgres -d postgres -c "
SELECT lr.id, lr.amount, lr.currency, lr.justification, lr.status, u.name as user_name, lr.created_at
FROM limit_requests lr
JOIN users u ON lr.user_id = u.id
ORDER BY lr.created_at DESC;"
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```bash
docker exec clm_postgres psql -U postgres -d postgres -c "
SELECT id, external_id, name, role FROM users ORDER BY role;"
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
.
‚îú‚îÄ‚îÄ docs/                   # –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏, —Å—Ö–µ–º–∞ –ë–î)
‚îÇ   ‚îú‚îÄ‚îÄ architecture.md
‚îÇ   ‚îú‚îÄ‚îÄ database.dbml
‚îÇ   ‚îî‚îÄ‚îÄ requirements/
‚îú‚îÄ‚îÄ services/               # –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –Ω–∞ Go
‚îÇ   ‚îî‚îÄ‚îÄ clm/               # Card Limit Manager —Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ frontend/               # SPA –Ω–∞ React + Vite
‚îú‚îÄ‚îÄ database/migrations/    # SQL-–º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ 001_initial_schema.sql    # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
‚îÇ   ‚îî‚îÄ‚îÄ 002_add_test_data.sql     # –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚îú‚îÄ‚îÄ nginx-proxy-conf/       # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx
‚îú‚îÄ‚îÄ integration/examples/   # –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º (read-only)
‚îú‚îÄ‚îÄ .devcontainer/          # devcontainer config –¥–ª—è VS Code / Cursor / Windsurf
‚îú‚îÄ‚îÄ docker-compose.yml
‚îî‚îÄ‚îÄ AGENTS.md               # –ø—Ä–∞–≤–∏–ª–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è Cursor / Windsurf
```

---

## üß™ –ü–æ–∫—Ä—ã—Ç–∏–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- Unit-—Ç–µ—Å—Ç—ã (Go, React) ‚â• 80% –ø–æ–∫—Ä—ã—Ç–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (Go + Postgres)
- End-to-End —Å—Ü–µ–Ω–∞—Ä–∏–∏ (Playwright)
- CI-ready: —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –∏ –≤ pipeline

---

## ü§ñ AGENTS.md

–í–Ω—É—Ç—Ä–∏ –∫–ª—é—á–µ–≤—ã—Ö –∫–∞—Ç–∞–ª–æ–≥–æ–≤ (`docs/specs/`, `services/`, `frontend/`) –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Ñ–∞–π–ª—ã `AGENTS.md`, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π –∏ –∫–æ–¥—É. –≠—Ç–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ `.cursorrules`.

---

## üìö –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License. –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ–±—É—á–∞—é—â–∏—Ö —Ü–µ–ª—è—Ö.
